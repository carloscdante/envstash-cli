import type { Client } from '@libsql/client';
import type { DriverAdapter } from '@prisma/driver-adapter-utils';
import { Mutex } from 'async-mutex';
import type { Query } from '@prisma/driver-adapter-utils';
import type { Queryable } from '@prisma/driver-adapter-utils';
import type { Result } from '@prisma/driver-adapter-utils';
import type { ResultSet } from '@prisma/driver-adapter-utils';
import type { Transaction } from '@libsql/client';
import type { Transaction as Transaction_2 } from '@prisma/driver-adapter-utils';

declare class LibSqlQueryable<ClientT extends StdClient | TransactionClient> implements Queryable {
    protected readonly client: ClientT;
    readonly provider = "sqlite";
    [LOCK_TAG]: Mutex;
    constructor(client: ClientT);
    /**
     * Execute a query given as SQL, interpolating the given parameters.
     */
    queryRaw(query: Query): Promise<Result<ResultSet>>;
    /**
     * Execute a query given as SQL, interpolating the given parameters and
     * returning the number of affected rows.
     * Note: Queryable expects a u64, but napi.rs only supports u32.
     */
    executeRaw(query: Query): Promise<Result<number>>;
    /**
     * Run a query against the database, returning the result set.
     * Should the query fail due to a connection error, the connection is
     * marked as unhealthy.
     */
    private performIO;
}

declare const LOCK_TAG: unique symbol;

export declare class PrismaLibSQL extends LibSqlQueryable<StdClient> implements DriverAdapter {
    constructor(client: StdClient);
    startTransaction(): Promise<Result<Transaction_2>>;
}

declare type StdClient = Client;

declare type TransactionClient = Transaction;

export { }
